{"version":3,"file":"index.js","sources":["../src/hooks/usePiConnection.ts","../src/hooks/usePiPurchase.ts"],"sourcesContent":["import { useEffect, useState, useCallback } from 'react';\nimport { PiSdkBase, PiUser } from 'pi-sdk-js';\n\nexport function usePiConnection() {\n  const [connected, setConnected] = useState(false);\n  const [user, setUser] = useState<PiUser | null>(null);\n  const [ready, setReady] = useState(false);\n\n  // Cache the sdk between renders for this session\n  const [sdk] = useState(() => new PiSdkBase());\n\n  const connect = useCallback(async () => {\n    sdk.onConnection = () => {\n      setConnected(true);\n      setUser(PiSdkBase.user);\n      setReady(true);\n    };\n    await sdk.connect();\n  }, [sdk]);\n\n  useEffect(() => {\n    connect();\n    // only want to connect on mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return { connected, user, ready };\n}\n\n","import { useCallback } from 'react';\nimport { PiSdkBase, PaymentData } from 'pi-sdk-js';\n\nexport function usePiPurchase(paymentData: PaymentData) {\n  return useCallback(() => {\n    // All three-way interaction is hidden and confined here:\n    const sdk = new PiSdkBase();\n    sdk.createPayment(paymentData);\n  }, [paymentData]);\n}\n\n"],"names":["usePiConnection","connected","setConnected","useState","user","setUser","ready","setReady","sdk","PiSdkBase","connect","useCallback","useEffect","usePiPurchase","paymentData"],"mappings":";;AAGO,SAASA,IAAkB;AAChC,QAAM,CAACC,GAAWC,CAAY,IAAIC,EAAS,EAAK,GAC1C,CAACC,GAAMC,CAAO,IAAIF,EAAwB,IAAI,GAC9C,CAACG,GAAOC,CAAQ,IAAIJ,EAAS,EAAK,GAGlC,CAACK,CAAG,IAAIL,EAAS,MAAM,IAAIM,GAAW,GAEtCC,IAAUC,EAAY,YAAY;AACtC,IAAAH,EAAI,eAAe,MAAM;AACvB,MAAAN,EAAa,EAAI,GACjBG,EAAQI,EAAU,IAAI,GACtBF,EAAS,EAAI;AAAA,IACf,GACA,MAAMC,EAAI,QAAA;AAAA,EACZ,GAAG,CAACA,CAAG,CAAC;AAER,SAAAI,EAAU,MAAM;AACd,IAAAF,EAAA;AAAA,EAGF,GAAG,CAAA,CAAE,GAEE,EAAE,WAAAT,GAAW,MAAAG,GAAM,OAAAE,EAAA;AAC5B;ACxBO,SAASO,EAAcC,GAA0B;AACtD,SAAOH,EAAY,MAAM;AAGvB,IADY,IAAIF,EAAA,EACZ,cAAcK,CAAW;AAAA,EAC/B,GAAG,CAACA,CAAW,CAAC;AAClB;"}