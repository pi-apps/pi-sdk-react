// ============================================================================
// Example {{name}} React Component
// Extends PiSdkComponent for Pi Network flows and UI.
// ============================================================================
import React from 'react';
import PiSdkComponent from "pi-sdk-react/PiSdkComponent";

interface {{name}}Props {
  connected: boolean;
}

interface {{name}}State {
  connected: boolean;
}

export default class {{name}} extends PiSdkComponent<{{name}}Props, {{name}}State> {
  constructor(props: {{name}}Props) {
    super(props);
    this.state = {
      connected: this.is_connected_to_pi()
    };
  }

  componentDidMount(): void {
    super.componentDidMount();
  }

  onConnection(): void {
    this.setState({ connected: this.is_connected_to_pi() });
  }

  buy(): void {
    // Buy logic here (add logging or business logic as needed)
    // Demo purposes, random order id
    const demoOrderId = Math.floor(10000 + Math.random() * 90000);
    const paymentData = {
      amount: 0.01,
      memo: "ConnecTo-Pi Admission",
      metadata: {
        description: "ConnecTo Admission",
        order_id: demoOrderId
      }
    };
    (this as any).createPayment(paymentData);
  }

  render(): React.ReactNode {
    return (
      <button
        disabled={!this.state.connected}
        onClick={() => this.buy()}
      >Buy</button>
    );
  }
}
